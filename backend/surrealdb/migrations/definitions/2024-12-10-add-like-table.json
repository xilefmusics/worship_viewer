{"schemas":"DEFINE TABLE like SCHEMAFULL;\n\nDEFINE FIELD user ON like TYPE record<user>\n    ASSERT $value != NONE;\n\nDEFINE FIELD song ON like TYPE record<song>\n    ASSERT $value != NONE;\n\nDEFINE FIELD created_at ON like TYPE datetime\n    DEFAULT time::now()\n    VALUE $before ?? $value\n    READONLY;\n\nDEFINE INDEX like_user_song_unique ON like COLUMNS user, song UNIQUE;\nDEFINE INDEX like_user_idx ON like COLUMNS user;\n\nDEFINE EVENT like_user_cascade ON user\n    WHEN $event = \"DELETE\"\n    THEN DELETE like WHERE user = $before.id;\n\nDEFINE EVENT like_song_cascade ON song\n    WHEN $event = \"DELETE\"\n    THEN DELETE like WHERE song = $before.id;","events":""}
